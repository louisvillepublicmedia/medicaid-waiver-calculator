<!doctype html>
<html lang='en-GB'>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="css/skeleton.css">	
	<link rel="stylesheet" href="css/style.css">

  <meta charset='utf-8'>
  <title>Kentucky Medicaid Waiver Calculator</title>
</head>

  <body>
  	
  	<!-- All of the html element represented in the <script id='template'> below will render to this container -->
    <div id='container' class='container'></div>
    <div id='jump'><a href="#results">See your results &darr;</a></div>
    
	  <div class="container">
  	  <div class="row thick-divider">&nbsp;</div>
  	  <div class="row" id="glossary">
    		<h3>Glossary</h3>		
  		    <h4 id="glossary-premium">Premium</h4>
          <p>The amount paid, often on a monthly basis, for health insurance. The cost of the premium may be shared between employers or government purchasers and individuals.</p>
          <h4 id="copay">Co-payment</h4>
          <p>A fixed dollar amount paid by an individual at the time of receiving a covered health care service from a participating provider. The required fee varies by the service provided and by the health plan.</p>
          <h4 id="glossary-myrewards">MyRewards Account</h4>
          <p>All adults (expansion adults, low-income parents, former foster care youth, and those receiving ESI premium assistance) will have a My Rewards incentive account if they are paying monthly premiums of at least $1.00. PregThe incentive account may be used to access additional, prior authorized, benefits not otherwise covered once sufficient funds are accrued.  These benefits include dental, vision, over the counter (OTC) medications, and limited reimbursement for the purchase of a gym membership. Pregnant women can have a My Rewards account without having to pay premiums.</p>
          <h4 id="glossary-medicaid">Medicaid</h4>
          <p>Enacted in 1965 under Title XIX of the Social Security Act, Medicaid is a federal entitlement program that provides health and long-term care coverage to certain categories of low-income Americans. States design their own Medicaid programs within broad federal guidelines. </p>
          <h4 id="glossary-medicare">Medicare</h4>
          <p>Enacted in 1965 under Title XVII of the Social Security Act, Medicare is a federal entitlement program that provides health insurance coverage to 45 million people, including people age 65 and older, and younger people with permanent disabilities, end-state renal disease, and Lou Gehrig’s disease</p>
          <h4 id="glossary-fpl">Federal Poverty Level (FPL)</h4>
          <p>The federal government’s working definition of poverty that is used as the reference point to determine the number of people with income below poverty and the income standard for eligibility for public programs.</p>
          <h4 id="glossary-retriel">Retroactive eligibility</h4>
          <p>Federal law directs state Medicaid programs to cover (and provides federal matching funds for) medical bills incurred up to 3 months prior to a beneficiary’s application date.</p>
  	  </div>
  	  
  	  <div class="row thick-divider">&nbsp;</div> 
      <div class="row" id="source">
    		<h3>About the Data</h3>		
  		  <p class="credit">Sources: xxxxxx<br>
    		  Data and language compiled by Lisa Gillespie and Alexandra Kanik<br>
  		  Calculator developed by Alexandra Kanik</p>
  	  </div>
    </div>
  
    <script id='template' type='text/ractive'>
    	<div class="row">
  		  <h1>Kentucky Medicaid Waiver Calculator</h1>
  		  <p class="lead">This calculator was created to help you understand how the new Kentucky Medicaid waiver will affect you personally.</p>
        <p class="lead">To use the calculator, go through each step below to select your personal characteristics.</p>
        <p class="lead">Please note that the state hasn’t fully finalized this criteria, and the interactive will be updated as more information is available. 
</p>
        <p><em>This app does not collect or store your personal information.</em></p>
  		</div>
  		
  		<div id="app-begin" class="row thick-divider">&nbsp;</div>
  		
  		<div class="row">
  		  <div class="one-half column">
  		  	<!--user inputs-->
  			  <form>
    			  
    			  
    			  <div class="form-group">
  			  		<div class="form-head">
                <h4>Do you currently receive Medicare benefits?</h4>
  			  		</div>
  			  		<div class="row">
    			  		<input type="radio" name="{{medicareOption}}" value="Yes"> Yes
                <input type="radio" name="{{medicareOption}}" value="No"> No
              </div>  
            </div>
    			  
    			  <div class="form-group">
  			  		<div class="form-head">
                <h4>Do you currently receive Medicaid under one of these waivers?</h4>
  			  		</div>
  			  		<div class="row">
    			  		<select value='{{selectedMedWaiver}}'>
                  <option selected> No</option>
                  {{#waivers}}
                      <option value='{{id}}'>{{name}}</option>
                  {{/waivers}}
                </select>
              </div>  
            </div>
                
            <div class="form-group">
  			  		<div class="form-head">
                <h4>Do any of these medical conditions apply to you?</h4>
              </div>
              <div class="row">
    			  		<select value='{{selectedMedCondition}}'>
                  <option selected> No</option>
                  {{#conditions}}
                      <option value='{{id}}'>{{name}}</option>
                  {{/conditions}}
                </select>
  				    </div>  
            </div>		
  				  
  				  <div class="form-group">
  			  		<div class="form-head">
  							<h4>Check all that apply to you:</h4>
  						</div>
  						<div class="row">
  							<label>
  						    <input type='checkbox' checked='{{former_foster}}'>
  						    I am a former foster care youth and am currently under 26 years of age
  							</label>
  							<label>
  						    <input type='checkbox' checked='{{pregnant}}'>
  						    I am currently pregnant
  							</label>
  							<label>
  						    <input type='checkbox' checked='{{student}}'>
  						    I am a full-time student (you will need to apply for this status)
  							</label>
  							<label>
  						    <input type='checkbox' checked='{{food}}'>
  						    I receive TANF and/or SNAP
  							</label>
  							
              </div>
            </div>
  			  	
  			  	<div class="form-group" id="householdSlider">
  			  		<div class="form-head">
  				  		<h4>Select your household size:</h4>
  				  		<label>Include yourself, your spouse (if married) and anyone you'll claim as a tax dependent in 2019</label>
  				  	</div>
  			  		<input type="range" min="1" max="20" step="1" value="{{userHousehold}}" />
  			  		<label class="indicator">Household size = {{userHousehold}}</label>
  			  	</div>
  			  	
  			  	{{#if userHousehold > 1}}
  			  	  <div class="form-group" id="dependentSlider">
  			  		<div class="form-head">
  				  		<h4>How many dependents do you claim?</h4>
  				  		<label>Include anyone you'll claim as a tax dependent in 2019</label>
  				  	</div>
  			  		<input type="range" min="0" max="20" step="1" value="{{userDependents}}" />
  			  		{{#if userDependents + 1 > userHousehold}}
  			  		  <label class="error indicator">You can't have more dependents than you have household members.</label>
              {{else}}
                <label class="indicator">Dependents = {{userDependents}}</label>
              {{/if}}
  			  	</div>
  			  	{{/if}}
  			  	
  			  	<div class="form-group" id="incomeSlider">
  			  		<div class="form-head">
  				  		<h4>Select household income:</h4>
  				  		<label>Use your <a href="https://turbotax.intuit.com/tax-tips/irs-tax-return/what-is-the-difference-between-agi-and-magi-on-your-taxes/L7kHckNS3" target="_blank">modified adjusted gross income here</a>.</label>
  				  		{{#if incomeAlert}}
  				  		  <label class="alert">{{incomeAlert}}</label>
  				  		{{/if}}
  				  	</div>
  			  		<input type="range" min="0" max="65000" step="50" value="{{userIncome}}" />
  			  		<label class="indicator">Household income = {{dollarFormat(userInput.income)}}</label>
  			  		<label class="center"><em>{{ userInput.povertyHR }}</em></label>
  			  	</div>
  			  	  					
  			  </form>
  		  </div>
  		  
  		  <div id="results" class="one-half column results">
  				
  				<h4>New measures</h4>
  				<div class="measures">
  				{{ #each applicableMeasures: num }}
  				  {{ #if details }}
  				    <div class="measure-title more-details accordion">{{{ title }}}</div>
              <div class="measure-detail panel">{{{ details }}}</div>
            {{ else }}
              <div class="measure-title accordion">{{{ title }}}</div>
  				  {{ /if }}
  				{{/each}}
  				</div>
  		  </div>
  		</div>
    </script>
  
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js'></script>
    <script src='../../js/ractive.js'></script>
  
  
    <script>
    	$(document).ready(function() {
      	
      	$(window).scroll(function(){
          var currentScreenPosition  = $(document).scrollTop();
          var appScreenPosition = $('#app-begin').offset().top;
          if (currentScreenPosition > appScreenPosition) {
            $( '.results' ).addClass( 'fixed' );
          }else{
            $( '.results' ).removeClass( 'fixed' );
          };
        });
    		
    		var waiver_measures = {
      		'nemt':'Access Non-Emergency Medical Transportation',
      		'retro':'Retroactive eligibility',
          'noretro':'No retroactive eligibility',
          'noco':'No copays or premiums',
          'choiceco':'Choice to pay copays instead of premiums',
          'sixtydays':'60 days to make premium payment',
          'immediate':'Premium payment due before coverage can start',
          'noengage':'No community engagment',
          'engage':'Community engagment required',
          'benefits':'Keep vision and other benefits',
          'myrewards':'Can earn points toward MyRewards program',
          'myrewardsgym':'Can earn points toward MyRewards program for gym benefits, if they pay a premium',
          'report':'Manditory reporting for changes to Medicaid eligibility'
          };
          
        var med_waivers = [
          {id:'HC', name:'Home and Community-Based Waiver - 1915(c)'},
          {id:'MP', name:'Michelle P Waiver - 1915(c)'},
          {id:'ABI', name:'Acquired Brain Injury - 1915(c)'},
          {id:'ABILT', name:'Acquired Brain Injury, Long Term Care - 1915(c)'},
          {id:'M', name:'Model Waiver II - 1915(c)'},
          {id:'SCL', name:'Supports for Community Living - 1915(c)'},
          {id:'NF', name:'Nursing Facility and ICF/MR Residents'},
          {id:'QMB', name:'Qualified Medicare Beneficiaries'}
        ];
        
        var med_conditions = [
          {id:'SSD', name:'I meet Social Security disability criteria'},
          {id:'MD', name:'Disabling mental disorder'},
          {id:'SUD', name:'Chronic Substance Use Disorder'},
          {id:'SCMC', name:'Serious and complex medical conditions'},
          {id:'IDD', name:'Physical, intellectual or developmental disabilities'}
        ];
          
        var applicable_measures = [];          
        var general_list = [];
        var cat2_list = [];
        var cat3_list = [];
        var cat4_list = [];
        var filtered_list = [];
                
    		
  	    var ractive = new Ractive({
  	      el: 'container',	
  	      template: '#template',
  	      data: {
  	      	userInput: {
    	      	income: 12000,
    	      	household: 1,
    	      	dependents:0,
    	      	pregnant: 0,
    	      	former_foster: 0,
    	      	med_waiver:0,
    	      	med_frail: 0,
    	      	medicare:0,
    	      	caregiver: 0,
    	      	student: 0,
    	      	food:0
  	      	},
  	      	medicareYes: false,
  	      	medicareNo: true,
  	      	userIncome: 12000,
  	      	userHousehold:1,
  	      	userDependents:0,
  	      	applicableMeasures:waiver_measures,
  	      	waivers:med_waivers,
  	      	conditions:med_conditions,
  					
  					//formats
  					dollarFormat: function(num){
  						var deciNum = parseFloat(Math.round(num*100)/100).toFixed(0);
  						var milNum = deciNum.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")
  						return '$' + milNum;
  					}					
  	      },// end data
  	      makeAccordions: function(){
    	      
  	      }
  	    }); //end var ractive
    		
  	    
  	    // Watch for changes on the user inputs. When a change is detected, 
  	    // compile the applicable measures and calculate the poverty level if  
  	    // the input has to do with that calculation. 
  	    
  	    ractive.observe('selectedMedWaiver', function(newValue, oldValue){
  				if(newValue != 'No'){
    				ractive.set('userInput.med_waiver', 1);
  				}else{
    				ractive.set('userInput.med_waiver', 0);
  				}
  				compile_applicable_measures()
  	    });
  	    
  	    ractive.observe('selectedMedCondition', function(newValue, oldValue){
  				if(newValue != 'No'){
    				ractive.set('userInput.med_frail', 1);
  				}else{
    				ractive.set('userInput.med_frail', 0);
  				}
  				compile_applicable_measures()
  	    });
  	    
  	    ractive.observe('medicareOption', function(newValue, oldValue){
  				if(newValue == 'Yes'){
    				ractive.set('userInput.medicare', 1);
  				}else{
    				ractive.set('userInput.medicare', 0);
  				}
  				compile_applicable_measures()
  	    });
  	      	    
  	    ractive.observe('userHousehold', function(newValue, oldValue){
  				ractive.set('userInput.household', newValue);
  				if(newValue < 2){
    				ractive.set('userInput.caregiver', 0);
  				}
  				setPovertyStatus();
  				compile_applicable_measures()
  	    });
  	    
  	    ractive.observe('userDependents', function(newValue, oldValue){
  				ractive.set('userInput.caregiver', newValue);
  				compile_applicable_measures()
  	    });
  	    
  	    ractive.observe('userIncome', function(newValue, oldValue){
  				ractive.set('userInput.income', newValue);
  				if(newValue > 60000){
    				var incomeAlert = 'If you make more than $60,000, you would have to have a family size \
    				  of more than 12 to qualify for Medicaid.';
    				ractive.set('incomeAlert', incomeAlert)
  				};
  				setPovertyStatus();
  				compile_applicable_measures()
  	    });
  	    
  	    ractive.observe('former_foster', function(newValue, oldValue){
  				ractive.set('userInput.former_foster', newValue);
  				compile_applicable_measures();
  	    });
  	    
  	    ractive.observe('pregnant', function(newValue, oldValue){
  				ractive.set('userInput.pregnant', newValue);
  				compile_applicable_measures()
  	    });
  	    
  	    ractive.observe('student', function(newValue, oldValue){
  				ractive.set('userInput.student', newValue);
  				compile_applicable_measures();
  	    });
  	    
  	    ractive.observe('food', function(newValue, oldValue){
  				ractive.set('userInput.food', newValue);
  				compile_applicable_measures();
  	    });
  	    
  	    ractive.observe('applicableMeasures', function(newValue, oldValue){
  				makeAccordions();
  	    });
  	      	    
  	    function getPovertyLevel(household){
    	    if(household == 1) return 12140;
    	    if(household == 2) return 16460;
    	    if(household == 3) return 20780;
    	    if(household == 4) return 25100;
    	    if(household == 5) return 29420;
    	    if(household == 6) return 33740;
    	    if(household == 7) return 38060;
    	    if(household == 8) return 42380;
    	    if(household == 9) return 46700;
    	    if(household == 10) return 51020;
    	    if(household == 11) return 55340;
    	    if(household == 12) return 59660;
  	    }
  	    
  	    function setPovertyStatus(){
    	    var income = ractive.get('userInput.income');
    	    var household = ractive.get('userInput.household');
    	    var povertyLevel = getPovertyLevel(household);
    	    var poverty138Level = povertyLevel*1.38;
    	    var poverty54Level = povertyLevel*.54;
    	    ractive.set('userInput.povertyLevel', povertyLevel);
    	    
    	    if(income <= poverty54Level){
      	    ractive.set('userInput.povertyHR','Your income is at or below 54% of the poverty level.');
      	    ractive.set('userInput.poverty54', 1);
      	    ractive.set('userInput.poverty138', 1);
      	    ractive.set('userInput.poverty', 1);
    	    }else if(income <= povertyLevel && income > poverty54Level){
      	    ractive.set('userInput.povertyHR','Your income is at or below 100% of the poverty level.');
      	    ractive.set('userInput.poverty54', 0);
      	    ractive.set('userInput.poverty138', 1);
      	    ractive.set('userInput.poverty', 1);
          }else if(income > povertyLevel && income <= poverty138Level){
            ractive.set('userInput.povertyHR','Your income is at or below 138% of the poverty level.')
            ractive.set('userInput.poverty54', 0);
            ractive.set('userInput.poverty138', 1);
      	    ractive.set('userInput.poverty', 0);
          }else{
            ractive.set('userInput.povertyHR','Your income does not meet income requirements for Medicaid.')
            ractive.set('userInput.poverty54', 0);
            ractive.set('userInput.poverty138', 0);
      	    ractive.set('userInput.poverty', 0);
          }
    	  }
    	          
        function compile_applicable_measures(){
          applicable_measures = [];
          
          medicare = ractive.get('userInput.medicare');
          med_waiver = ractive.get('userInput.med_waiver');
          med_frail = ractive.get('userInput.med_frail');
          former_foster = ractive.get('userInput.former_foster');
          pregnant = ractive.get('userInput.pregnant');
          student = ractive.get('userInput.student');
          food = ractive.get('userInput.food');
          caregiver = ractive.get('userInput.caregiver');
          income = ractive.get('userInput.income');
          povertyLevel = ractive.get('userInput.povertyLevel');
          poverty54 = ractive.get('userInput.poverty54');
          poverty = ractive.get('userInput.poverty');
          poverty138 = ractive.get('userInput.poverty138');          
          
          function commEngage(){
            if(former_foster > 0 || pregnant > 0 || caregiver > 0 || med_frail > 0 || student > 0 || food > 0){
              // if you're just a caregiver
              if(former_foster < 1 && pregnant < 1 && med_frail < 1 && student < 1 && food < 1){
                measure = {};
                title = 'You are exempt from the 80-hour community engagement requirement. However, only one caregiver per household may claim this examption.';
                details = 'Example: You and your husband stay home to take care of your 2 children and also your elderly parents. Either you or your husband will be able to claim the exemption.';
                measure['title'] = title;
                measure['details'] = details;
                return measure; 
              }else{
                measure = {};
                title = 'You are exempt from the 80-hour community engagement requirement.';
                details = '';
                measure['title'] = title;
                measure['details'] = details;
                return measure;
              }
            }else{
              measure = {};
              title = 'Complete 80 hours of community service per month.';
              details = `<p>You will have to complete 80 hours a month of some combination of ‘community engagement’ like: employment, job searching, job training, education (related to employment, high school, college, graduate, ESL, vocational, etc.) or volunteer work (community work experience, community service).</p>
              <p>If you do not complete these hours and report them, your health insurance will be suspended.</p>
              <p>To regain coverage, you will have 30 days to either:<br>
                1) Complete a state-sponsored financial or health literacy course<br>
                2) Complete 80 hours of community engagement in that 30 days
              </p>
              <p>If you haven’t met these requirements by your redetermination date you’ll have your insurance terminated. At this point, you can regain coverage if you submit a new Medicaid insurance application.</p>
              <p>Kentucky will provide ‘good cause exemptions’ in some circumstances if you cannot meet the requirements. These include: if you were hospitalized, a member of your family died or was put in an institution, you were evicted from your home or became homeless, you were the victim of a natural disaster (like a flood or fire) or you experienced domestic violence.</p>`;
              measure['title'] = title;
              measure['details'] = details;
              return measure;
            }
          };
          
          function premium(){
            if(former_foster > 0 || pregnant > 0 || med_frail > 0){
              if(pregnant > 0){
                measure = {};
                title = 'You will will never have to pay a premium during your pregnancy.';
                details = '';
                measure['title'] = title;
                measure['details'] = details;
                return measure;
              }else{
                measure = {};
                title = 'You will not need to pay premiums or copays.';
                details = 'However, you can pay a premium for access to a  MyRewards account, which could be used to help pay for a gym membership. If you don’t pay your premium within 60 days of invoice date, you’ll lose access to that account.';
                measure['title'] = title;
                measure['details'] = details;
                return measure;
              }
            }else{
              measure = {};
              details = '';
              
              var getTitle = function(income, povertyLevel){
                if(income < (povertyLevel*.25)) return 'You will need to pay a premium of <strong>$1.00</strong> per month.';
                if(income <= (povertyLevel*.5)) return 'You will need to pay a premium of <strong>$4.00</strong> per month.';
                if(income <= povertyLevel) return 'You will need to pay a premium of <strong>$8.00</strong> per month.';
                return 'You will need to pay a premium of <strong>$15.00</strong> per month.';
              };
      
              measure['title'] = getTitle(income, povertyLevel);
              measure['details'] = details;
              return measure;
            }
          };
          
          function lockOut(){
            if(poverty > 0 || pregnant > 0 || med_frail > 0 || former_foster > 0 || caregiver > 0){
              // if you're just under 100 poverty
              if(pregnant < 1 && med_frail < 1 && former_foster < 1 && caregiver < 0){
                measure = {};
                title = 'You could face a lock out for a couple things.'
                details = `1) <strong>Community Engagement</strong>: You could be locked out if you do not complete 80 hours of community engagement hours. You can avoid being locked out by making up the 80 hours within the next month.  Unless you do this, you’ll be kicked off your coverage for six months. During that six month time frame you can regain coverage if you take a state-sponsored health or financial literacy course.<br>
                2) <strong>Annual Renewal</strong>: You could be locked out for not completing an annual renewal on time.<br>
                3) <strong>Reporting changes in eligibility</strong>: You could be locked out if the state finds out you’ve had a change income, dependents, medical frailty, etc. and did not notify them within 10 days.`;
                measure['title'] = title;
                measure['details'] = details;
                return measure;
              // if you're a caregiver
              }else if(pregnant < 1 && med_frail < 1 && former_foster < 1){
                measure = {};
                title = 'You could face a lock out for a couple things.';
                details = `1) <strong>Annual Renewal</strong>: You could be locked out for not completing an annual renewal on time. If you’re locked out, you can take a financial course or health literacy course to regain coverage.<br>
              2) <strong>Reporting changes in eligibility</strong>: You could be locked out if the state finds out you’ve had a change income, dependents, medical frailty, etc. and did not notify them within 10 days.`;
                measure['title'] = title;
                measure['details'] = details;
                return measure;
              // if you're pregnant, med_frail or former_foster  
              }else{
                measure = {};
                title = 'You will never face a lockout period from your benefits.';
                details = '';
                measure['title'] = title;
                measure['details'] = details;
                return measure;
              }
            }else{
              measure = {};
              title = 'You could face a lock out for a couple things.';
              details = `1) <strong>Community Engagement</strong>: You could be locked out if you do not complete 80 hours of community engagement hours. You can avoid being locked out by making up the 80 hours within the next month.  Unless you do this, you’ll be kicked off your coverage for six months. During that six month time frame you can regain coverage if you take a state-sponsored health or financial literacy course.<br>
                2) <strong>Premiums</strong>: You could be locked out if you do not pay your premiums on time. You could regain coverage, however, by paying back the owed premiums up to three months.<br>
                3) <strong>Annual Renewal</strong>: You could be locked out for not completing an annual renewal on time.<br>
                4) <strong>Reporting changes in eligibility</strong>: You could be locked out if the state finds out you’ve had a change income, dependents, medical frailty, etc. and did not notify them within 10 days.`;
              measure['title'] = title;
              measure['details'] = details;
              return measure;
            }
          };
          
          function retroEl(){
            if(former_foster > 0 || pregnant > 0){
              measure = {};
              title = 'Medical claims you have backdating three months before your application approval will be paid for by the state.';
              details = '';
              measure['title'] = title;
              measure['details'] = details;
              return measure;
            }else{
              measure = {};
              title = 'Medicaid benefits will only be accessible starting the first day of the month that you pay premium. This means the state will not pay for any medical claims you have in the previous three months before you pay your premium.';
              details = '';
              measure['title'] = title;
              measure['details'] = details;
              return measure;
            }
          };
          
          function coverageStart(){
            if(former_foster > 0 || med_frail > 0){
              measure = {};
              title = 'Your insurance will start on first day of the month of your application date.';
              details = '';
              measure['title'] = title;
              measure['details'] = details;
              return measure;
            }else{
              measure = {};
              title = 'Your insurance will start the first day of the month when you pay a premium. A premium is a monthly payment you’ll have to keep your coverage.';
              details = 'For example, if you pay your premium on April 15th, you will be covered starting April 1.';
              measure['title'] = title;
              measure['details'] = details;
              return measure;
            }
          };
          
          function myRewards(){
            if(former_foster > 0 || pregnant > 0 || med_frail > 0 || (caregiver > 0 && poverty54 > 0)){
              if(pregnant > 0){
                measure = {};
                title = 'You will keep your vision, dental and over-the-counter drug benefits.';
                details = '';
                measure['title'] = title;
                measure['details'] = details;
                return measure;
              }else{
                measure = {};
                title = 'You will keep your vision, dental and over-the-counter medication benefits. But you can pay a premium to gain access to a “My Rewards account.';
                details = 'By doing things like taking health-literacy classes and not missing medical appointments, your MyRewards account will be credited "dollars." You can use these dollars to pay for fitness activities, like a gym membership.';
                measure['title'] = title;
                measure['details'] = details;
                return measure;
              }
            }else{
              measure = {};
              title = 'You lose automatic vision, dental and over-the-counter medication benefits. If you pay a premium, you’ll access a “My Rewards” account.';
              details = 'By doing things like taking health-literacy classes and not missing medical appointments, your My Rewards account will be credited "dollars" that you can then use to pay for dental, vision and other services.';
              measure['title'] = title;
              measure['details'] = details;
              return measure;

            }
          };
          
          function nonEmerMedTrans(){
            if(former_foster > 0 || pregnant > 0 || med_frail > 0 || (caregiver > 0 && poverty54 > 0)){
              measure = {};
              title = 'You will still have access to non-emergency medical transportation. This can be used to drive you to medical appointments that you would not otherwise be able to get to.';
              details = '';
              measure['title'] = title;
              measure['details'] = details;
              return measure;
            }else{
              measure = {};
              title = 'You will lose access to non-emergency medical transportation. This is currently used by some enrollees to help transport them to and from medical appointments they would not otherwise be able to get to.';
              details = '';
              measure['title'] = title;
              measure['details'] = details;
              return measure;

            }
          };
          
          if(poverty == 0 &&  poverty138 == 0){
            applicable_measures = [{title:'Your income does not meet income requirements for Medicaid.'}]
            ractive.set('applicableMeasures', applicable_measures);
          }else if(med_waiver > 0){
            applicable_measures = [{title:'You do not have any changes to your Medicaid benefits.'}]
            ractive.set('applicableMeasures', applicable_measures);
          }else if(medicare > 0){
            applicable_measures = [{title:'You do not have any changes to your Medicaid benefits.'}]
            ractive.set('applicableMeasures', applicable_measures);
          }else{
            var commengage_req = commEngage();
            var premium_req = premium();
            var lockout_req = lockOut();
            var retro_req = retroEl();
            var coverage_req = coverageStart();
            var myrewards_req = myRewards();
            var nemt_req = nonEmerMedTrans();
            
            applicable_measures.push(commengage_req);
            applicable_measures.push(premium_req);
            applicable_measures.push(lockout_req);
            applicable_measures.push(retro_req);
            applicable_measures.push(coverage_req);
            applicable_measures.push(myrewards_req);
            applicable_measures.push(nemt_req);
            
            ractive.set('applicableMeasures', applicable_measures);
          }
          
        };
        
        function makeAccordions(){
          var acc = document.getElementsByClassName("more-details");
          var i;
          
          for (i = 0; i < acc.length; i++) {
            console.log(acc[i]);
            acc[i].addEventListener("click", function() {
              this.classList.toggle("active");
              var panel = this.nextElementSibling;
              if (panel.style.maxHeight){
                panel.style.maxHeight = null;
              } else {
                panel.style.maxHeight = panel.scrollHeight + "px";
              } 
            });
          }
        }
   	   
  	  }); //end $(document).ready
  			
  	</script>
  </body>
</html>
